(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[393],{9559:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E});var s=r(95155),a=r(12115),n=r(35695),l=r(29642),i=r(75288),d=r(52651),o=r(66695),c=r(62523),u=r(85057),m=r(59409),f=r(87481),p=r(6723),x=r(12348),h=r(10081),y=r(3e4),v=r(19249),g=r(56104),j=r(7334),N=r(36465),w=r(91394),b=r(17759);let S=d.Ik({name:d.Yj().min(2,"Le nom est requis."),vehicleType:d.k5(["scooter","car","bicycle"])});function E(){let e=(0,n.useRouter)(),{toast:t}=(0,f.dj)(),[r,d]=(0,a.useState)(!0),[E,A]=(0,a.useState)("idle"),[T,I]=(0,a.useState)(null),C=(0,a.useRef)(!1),R=(0,l.mN)({resolver:(0,i.u)(S),defaultValues:{name:"",vehicleType:"scooter"},mode:"onBlur"}),k=(0,a.useCallback)(async()=>{let r=g.j2.currentUser;if(!r)return void e.push("/login");C.current&&d(!0);try{let e=(0,j.H9)(g.db,"deliveryPeople",r.uid),s=await (0,j.x7)(e);if(s.exists()&&C.current){let e=s.data();I(e),R.reset({name:e.name,vehicleType:e.vehicleType})}else t({title:"Erreur",description:"Profil livreur introuvable.",variant:"destructive"})}catch(e){t({title:"Erreur",description:"Impossible de charger le profil.",variant:"destructive"})}finally{C.current&&d(!1)}},[e,t,R]);(0,a.useEffect)(()=>{C.current=!0;let t=g.j2.onAuthStateChanged(t=>{t?k():e.push("/login")});return()=>{C.current=!1,t()}},[k,e]);let _=async e=>{let r=g.j2.currentUser;if(!r)return;let s=S.safeParse(R.getValues());if(s.success){A("saving");try{await (0,N.TH)(r.uid,s.data),setTimeout(()=>A("saved"),500),setTimeout(()=>A("idle"),2e3)}catch(e){A("idle"),t({title:"Erreur de sauvegarde",description:"Vos modifications n'ont pas pu \xeatre enregistr\xe9es.",variant:"destructive"})}}},M=e=>{R.trigger(e).then(e=>{e&&_(R.getValues())})};if(r)return(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)(p.A,{className:"h-12 w-12 animate-spin text-primary"})});let O=R.getValues();return(0,s.jsxs)("div",{className:"bg-primary",children:[(0,s.jsxs)("div",{className:"p-4 pt-8",children:[(0,s.jsx)("div",{className:"flex justify-between items-center text-white mb-6",children:(0,s.jsx)("h1",{className:"text-xl font-bold",children:"MON PROFIL"})}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(w.eu,{className:"h-20 w-20 border-4 border-white/50",children:(0,s.jsx)(w.q5,{children:(0,s.jsx)(x.A,{size:32})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:O.name}),(0,s.jsx)("p",{className:"text-white/80 text-sm",children:null==T?void 0:T.email})]})]})]}),(0,s.jsx)(o.Zp,{className:"rounded-t-3xl mt-6",children:(0,s.jsxs)(o.Wu,{className:"p-4 space-y-6",children:[(0,s.jsxs)("div",{className:"h-6 flex items-center justify-center",children:["saving"===E&&(0,s.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,s.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Enregistrement..."]}),"saved"===E&&(0,s.jsxs)("div",{className:"flex items-center text-sm text-green-600",children:[(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Modifications enregistr\xe9es!"]})]}),(0,s.jsxs)("form",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{htmlFor:"name",children:"Nom Complet"}),(0,s.jsx)(l.xI,{name:"name",control:R.control,render:e=>{let{field:t}=e;return(0,s.jsx)(c.p,{id:"name",...t,onBlur:()=>M("name")})}}),R.formState.errors.name&&(0,s.jsx)("p",{className:"text-sm text-destructive",children:R.formState.errors.name.message})]}),(0,s.jsx)(l.xI,{name:"vehicleType",control:R.control,render:e=>{let{field:t}=e;return(0,s.jsxs)(b.eI,{children:[(0,s.jsx)(u.J,{children:"Type de v\xe9hicule"}),(0,s.jsxs)(m.l6,{onValueChange:e=>{t.onChange(e),_({...R.getValues(),vehicleType:e})},value:t.value,children:[(0,s.jsx)(m.bq,{id:"vehicleType",children:(0,s.jsx)(m.yv,{placeholder:"S\xe9lectionnez un v\xe9hicule"})}),(0,s.jsxs)(m.gC,{children:[(0,s.jsx)(m.eb,{value:"scooter",children:"Scooter"}),(0,s.jsx)(m.eb,{value:"car",children:"Voiture"}),(0,s.jsx)(m.eb,{value:"bicycle",children:"V\xe9lo"})]})]})]})}}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{children:"Email (non modifiable)"}),(0,s.jsxs)("div",{className:"flex h-10 w-full items-center rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground gap-2",children:[(0,s.jsx)(y.A,{className:"w-4 h-4"}),null==T?void 0:T.email]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{children:"R\xe9gion (non modifiable)"}),(0,s.jsxs)("div",{className:"flex h-10 w-full items-center rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground gap-2",children:[(0,s.jsx)(v.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"capitalize",children:null==T?void 0:T.region})]})]})]})]})})]})}},10081:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(31291).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},12348:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(31291).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},16872:(e,t,r)=>{Promise.resolve().then(r.bind(r,9559))},17759:(e,t,r)=>{"use strict";r.d(t,{C5:()=>h,MJ:()=>x,eI:()=>p,lV:()=>o,zB:()=>u});var s=r(95155),a=r(12115),n=r(46057),l=r(29642),i=r(59434),d=r(85057);let o=l.Op,c=a.createContext({}),u=e=>{let{...t}=e;return(0,s.jsx)(c.Provider,{value:{name:t.name},children:(0,s.jsx)(l.xI,{...t})})},m=()=>{let e=a.useContext(c),t=a.useContext(f),{getFieldState:r,formState:s}=(0,l.xW)(),n=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...n}},f=a.createContext({}),p=a.forwardRef((e,t)=>{let{className:r,...n}=e,l=a.useId();return(0,s.jsx)(f.Provider,{value:{id:l},children:(0,s.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",r),...n})})});p.displayName="FormItem",a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:n,formItemId:l}=m();return(0,s.jsx)(d.J,{ref:t,className:(0,i.cn)(n&&"text-destructive",r),htmlFor:l,...a})}).displayName="FormLabel";let x=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:l,formDescriptionId:i,formMessageId:d}=m();return(0,s.jsx)(n.DX,{ref:t,id:l,"aria-describedby":a?"".concat(i," ").concat(d):"".concat(i),"aria-invalid":!!a,...r})});x.displayName="FormControl",a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:n}=m();return(0,s.jsx)("p",{ref:t,id:n,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})}).displayName="FormDescription";let h=a.forwardRef((e,t)=>{var r;let{className:a,children:n,...l}=e,{error:d,formMessageId:o}=m(),c=d?String(null!=(r=null==d?void 0:d.message)?r:""):n;return c?(0,s.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-sm font-medium text-destructive",a),...l,children:c}):null});h.displayName="FormMessage"},18884:(e,t,r)=>{"use strict";e.exports=r(22603)},19249:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(31291).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},22603:(e,t,r)=>{"use strict";var s=r(12115),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=s.useState,l=s.useEffect,i=s.useLayoutEffect,d=s.useDebugValue;function o(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),s=n({inst:{value:r,getSnapshot:t}}),a=s[0].inst,c=s[1];return i(function(){a.value=r,a.getSnapshot=t,o(a)&&c({inst:a})},[e,r,t]),l(function(){return o(a)&&c({inst:a}),e(function(){o(a)&&c({inst:a})})},[e]),d(r),r};t.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:c},3e4:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(31291).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},36465:(e,t,r)=>{"use strict";r.d(t,{P:()=>c,TH:()=>i,p:()=>o,xY:()=>l,z7:()=>d});var s=r(7334),a=r(56104);let n="deliveryPeople";async function l(e){try{let t=(0,s.H9)(a.db,n,e.uid);await (0,s.BN)(t,{...e,role:"delivery",status:e.status||"pending"})}catch(e){throw console.error("Error adding delivery person: ",e),Error("Could not add the delivery person.")}}async function i(e,t){try{let r=(0,s.H9)(a.db,n,e);await (0,s.mZ)(r,t)}catch(e){throw console.error("Error updating delivery person profile: ",e),Error("Could not update delivery person profile.")}}async function d(){try{return(await (0,s.GG)((0,s.rJ)(a.db,n))).docs.map(e=>({uid:e.id,...e.data()}))}catch(e){throw console.error("Error fetching all delivery people:",e),Error("Could not fetch delivery people.")}}async function o(){try{let e=(0,s.P)((0,s.rJ)(a.db,n),(0,s._M)("status","==","pending"));return(await (0,s.GG)(e)).docs.map(e=>({uid:e.id,...e.data()}))}catch(e){throw console.error("Error fetching pending delivery people:",e),Error("Could not fetch pending delivery people.")}}async function c(e,t){try{let r=(0,s.H9)(a.db,n,e);await (0,s.mZ)(r,{status:t})}catch(e){throw console.error("Error updating delivery person status:",e),Error("Could not update delivery person status.")}}},56104:(e,t,r)=>{"use strict";let s,a,n,l,i;r.d(t,{IG:()=>l,db:()=>n,hJ:()=>i,j2:()=>a});var d=r(49868),o=r(46151),c=r(7334),u=r(46068);s=0===(0,d.Dk)().length?(0,d.Wp)({apiKey:"AIzaSyDhJXy_8JJ89CUMhj8iyldXvps_H5R7AHI",authDomain:"fithelath.firebaseapp.com",projectId:"fithelath",storageBucket:"fithelath.firebasestorage.app",messagingSenderId:"98685881966",appId:"1:98685881966:web:99d8147fde3b9b5847a07f"}):(0,d.Sx)(),a=(0,o.xI)(s),(0,o.oM)(a,o.F0).catch(e=>{console.error("Firebase persistence error:",e)}),n=(0,c.aU)(s),l=(0,u.c7)(s),i=new o.HF},59409:(e,t,r)=>{"use strict";r.d(t,{bq:()=>m,eb:()=>h,gC:()=>x,l6:()=>c,yv:()=>u});var s=r(95155),a=r(12115),n=r(71230),l=r(67009),i=r(55852),d=r(23901),o=r(59434);let c=n.bL;n.YJ;let u=n.WT,m=a.forwardRef((e,t)=>{let{className:r,children:a,...i}=e;return(0,s.jsxs)(n.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...i,children:[a,(0,s.jsx)(n.In,{asChild:!0,children:(0,s.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.l9.displayName;let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});f.displayName=n.PP.displayName;let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})});p.displayName=n.wn.displayName;let x=a.forwardRef((e,t)=>{let{className:r,children:a,position:l="popper",...i}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsxs)(n.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...i,children:[(0,s.jsx)(f,{}),(0,s.jsx)(n.LM,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(p,{})]})})});x.displayName=n.UC.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})}).displayName=n.JU.displayName;let h=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e;return(0,s.jsxs)(n.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})}),(0,s.jsx)(n.p4,{children:a})]})});h.displayName=n.q7.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=n.wv.displayName},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(61219),a=r(6967);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},62523:(e,t,r)=>{"use strict";r.d(t,{p:()=>l});var s=r(95155),a=r(12115),n=r(59434);let l=a.forwardRef((e,t)=>{let{className:r,type:a,...l}=e;return(0,s.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...l})});l.displayName="Input"},66695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>u,ZB:()=>o,Zp:()=>i,aR:()=>d});var s=r(95155),a=r(12115),n=r(46057),l=r(59434);let i=a.forwardRef((e,t)=>{let{className:r,as:a="div",asChild:i=!1,...d}=e,o=i?n.DX:a;return(0,s.jsx)(o,{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground",r),...d})});i.displayName="Card";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});d.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...a})});u.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},85057:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var s=r(95155),a=r(12115),n=r(44167),l=r(63999),i=r(59434);let d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.b,{ref:t,className:(0,i.cn)(d(),r),...a})});o.displayName=n.b.displayName},87481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var s=r(12115);let a=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?l(r):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],o={toasts:[]};function c(e){o=i(o,e),d.forEach(e=>{e(o)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=s.useState(o);return s.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},91394:(e,t,r)=>{"use strict";r.d(t,{BK:()=>d,eu:()=>i,q5:()=>o});var s=r(95155),a=r(12115),n=r(95419),l=r(59434);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.bL,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...a})});i.displayName=n.bL.displayName;let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n._V,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",r),...a})});d.displayName=n._V.displayName;let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.H4,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...a})});o.displayName=n.H4.displayName},95419:(e,t,r)=>{"use strict";r.d(t,{H4:()=>S,_V:()=>b,bL:()=>w});var s=r(12115),a=r(76714),n=r(13208),l=r(79143),i=r(77868),d=r(18884);function o(){return()=>{}}var c=r(95155),u="Avatar",[m,f]=(0,a.A)(u),[p,x]=m(u),h=s.forwardRef((e,t)=>{let{__scopeAvatar:r,...a}=e,[n,l]=s.useState("idle");return(0,c.jsx)(p,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:l,children:(0,c.jsx)(i.sG.span,{...a,ref:t})})});h.displayName=u;var y="AvatarImage",v=s.forwardRef((e,t)=>{let{__scopeAvatar:r,src:a,onLoadingStatusChange:u=()=>{},...m}=e,f=x(y,r),p=function(e,t){let{referrerPolicy:r,crossOrigin:a}=t,n=(0,d.useSyncExternalStore)(o,()=>!0,()=>!1),i=s.useRef(null),c=n?(i.current||(i.current=new window.Image),i.current):null,[u,m]=s.useState(()=>N(c,e));return(0,l.N)(()=>{m(N(c,e))},[c,e]),(0,l.N)(()=>{let e=e=>()=>{m(e)};if(!c)return;let t=e("loaded"),s=e("error");return c.addEventListener("load",t),c.addEventListener("error",s),r&&(c.referrerPolicy=r),"string"==typeof a&&(c.crossOrigin=a),()=>{c.removeEventListener("load",t),c.removeEventListener("error",s)}},[c,a,r]),u}(a,m),h=(0,n.c)(e=>{u(e),f.onImageLoadingStatusChange(e)});return(0,l.N)(()=>{"idle"!==p&&h(p)},[p,h]),"loaded"===p?(0,c.jsx)(i.sG.img,{...m,ref:t,src:a}):null});v.displayName=y;var g="AvatarFallback",j=s.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:a,...n}=e,l=x(g,r),[d,o]=s.useState(void 0===a);return s.useEffect(()=>{if(void 0!==a){let e=window.setTimeout(()=>o(!0),a);return()=>window.clearTimeout(e)}},[a]),d&&"loaded"!==l.imageLoadingStatus?(0,c.jsx)(i.sG.span,{...n,ref:t}):null});function N(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}j.displayName=g;var w=h,b=v,S=j}},e=>{var t=t=>e(e.s=t);e.O(0,[310,1951,4595,8561,9247,4734,6482,5637,3699,8441,1684,7358],()=>t(16872)),_N_E=e.O()}]);
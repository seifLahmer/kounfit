(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8620],{14277:(e,t,s)=>{Promise.resolve().then(s.bind(s,45951))},24944:(e,t,s)=>{"use strict";s.d(t,{k:()=>i});var a=s(95155),r=s(12115),l=s(12050),n=s(59434);let i=r.forwardRef((e,t)=>{let{className:s,value:r,indicatorClassName:i,...o}=e;return(0,a.jsx)(l.bL,{ref:t,className:(0,n.cn)("relative h-2 w-full overflow-hidden rounded-full bg-muted",s),...o,children:(0,a.jsx)(l.C1,{className:(0,n.cn)("h-full w-full flex-1 bg-primary transition-all",i),style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});i.displayName=l.bL.displayName},30285:(e,t,s)=>{"use strict";s.d(t,{$:()=>c,r:()=>o});var a=s(95155),r=s(12115),l=s(46057),n=s(63999),i=s(59434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:c=!1,...d}=e,u=c?l.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:r,size:n,className:s})),ref:t,...d})});c.displayName="Button"},45951:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var a=s(95155),r=s(12115),l=s(6723),n=s(22318),i=s(58295),o=s(59171),c=s(56104),d=s(87481),u=s(35695),f=s(91394),m=s(30285),x=s(66695),h=s(66766),p=s(85807),g=s(24944);let j=e=>{let{consumed:t,goal:s}=e,r=s>0?Math.min(t/s*100,100):0,l=2*Math.PI*40;return(0,a.jsx)("div",{className:"relative w-28 h-28",children:(0,a.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[(0,a.jsx)("circle",{className:"stroke-current text-gray-200",strokeWidth:"8",fill:"none",cx:"50",cy:"50",r:"40"}),(0,a.jsx)("circle",{className:"stroke-current text-primary",strokeWidth:"8",strokeLinecap:"round",fill:"none",cx:"50",cy:"50",r:"40",transform:"rotate(-90 50 50)",style:{strokeDasharray:l,strokeDashoffset:l-r/100*l,transition:"stroke-dashoffset 0.5s"}}),(0,a.jsx)("text",{x:"50%",y:"45%",textAnchor:"middle",dy:".3em",className:"text-xl font-bold fill-current",children:Math.round(t)}),(0,a.jsx)("text",{x:"50%",y:"60%",textAnchor:"middle",dy:".3em",className:"text-xs fill-muted-foreground",children:"dans la cible"})]})})},v=e=>{let{label:t,consumed:s,goal:r}=e,l=r>0?Math.round(s/r*100):0;return(0,a.jsx)(x.Zp,{className:"flex-1 shadow-md rounded-2xl",children:(0,a.jsxs)(x.Wu,{className:"p-3 space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)("p",{className:"text-xl font-bold",children:s.toFixed(2)}),(0,a.jsx)("p",{className:"text-sm font-semibold",children:"g"})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["sur ",r," g"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.k,{value:l,className:"h-1.5 w-full"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[l,"%"]})]})]})})},b=e=>{let{consumedCalories:t,calorieGoal:s,consumedMacros:r,macroGoals:l}=e,n=s-t;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(x.Zp,{className:"shadow-lg rounded-2xl",children:(0,a.jsxs)(x.Wu,{className:"p-4 flex items-center justify-between",children:[(0,a.jsx)(j,{consumed:t,goal:s}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Restant / consomm\xe9es"}),(0,a.jsx)("p",{className:"text-4xl font-bold",children:n.toFixed(1)}),(0,a.jsx)("p",{className:"text-md text-muted-foreground",children:"kcal restantes"}),(0,a.jsx)("svg",{width:"60",height:"8",viewBox:"0 0 60 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ml-auto mt-1",children:(0,a.jsx)("path",{d:"M1 6.5C8.66667 2.5 18.2 -1.1 29 2C41.2 5.5 51.8333 6.33333 59 4.5",stroke:"#D1D5DB",strokeWidth:"2",strokeLinecap:"round"})})]})]})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(v,{label:"Prot\xe9ines",consumed:r.protein,goal:l.protein}),(0,a.jsx)(v,{label:"Glucides",consumed:r.carbs,goal:l.carbs}),(0,a.jsx)(v,{label:"Lipides",consumed:r.fat,goal:l.fat})]})]})},N=e=>{let{value:t,label:s,colorClass:r,goal:l}=e,n=l>0?Math.min(t/l*100,100):0,i=2*Math.PI*14;return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"relative w-9 h-9",children:(0,a.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 32 32",children:[(0,a.jsx)("circle",{className:"stroke-current text-white/20",strokeWidth:"2",fill:"none",cx:"16",cy:"16",r:"14"}),(0,a.jsx)("circle",{className:"stroke-current ".concat(r),strokeWidth:"2",strokeLinecap:"round",fill:"none",cx:"16",cy:"16",r:"14",transform:"rotate(-90 16 16)",style:{strokeDasharray:i,strokeDashoffset:i-n/100*i,transition:"stroke-dashoffset 0.5s"}}),(0,a.jsx)("text",{x:"50%",y:"50%",textAnchor:"middle",dy:".3em",className:"text-[9px] font-bold fill-white",children:Math.round(t)})]})}),(0,a.jsx)("p",{className:"text-[10px] mt-1",children:s})]})},y=e=>{let{meals:t}=e,s=t.reduce((e,t)=>(e.calories+=(null==t?void 0:t.calories)||0,e.protein+=(null==t?void 0:t.macros.protein)||0,e.carbs+=(null==t?void 0:t.macros.carbs)||0,e.fat+=(null==t?void 0:t.macros.fat)||0,e),{calories:0,protein:0,carbs:0,fat:0}),r={calories:600,protein:40,carbs:70,fat:20};return(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-center text-xs text-white",children:[(0,a.jsx)(N,{value:s.calories,label:"Kcal",colorClass:"text-primary",goal:r.calories}),(0,a.jsx)(N,{value:s.protein,label:"Prot",colorClass:"text-protein",goal:r.protein}),(0,a.jsx)(N,{value:s.carbs,label:"Gluc",colorClass:"text-carbs",goal:r.carbs}),(0,a.jsx)(N,{value:s.fat,label:"Lip",colorClass:"text-fat",goal:r.fat})]})})},w=e=>{let{title:t,meals:s,onAdd:r,defaultImage:l}=e,n=s.length>0;return(0,a.jsxs)(x.Zp,{className:"relative rounded-2xl overflow-hidden shadow-lg h-48 group cursor-pointer",onClick:r,children:[(0,a.jsx)(h.default,{src:l,alt:t,layout:"fill",objectFit:"cover",className:"z-0 transition-transform duration-300 group-hover:scale-105","data-ai-hint":n?s[0].name:"healthy food"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/40 z-0"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent z-10"}),(0,a.jsxs)(x.Wu,{className:"relative z-20 flex flex-col justify-between h-full p-3 text-white",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("h3",{className:"font-bold text-lg font-heading",children:t}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),r()},className:"bg-white hover:bg-gray-200 text-primary rounded-full w-8 h-8 flex items-center justify-center shrink-0 shadow-md",children:(0,a.jsx)(p.A,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"flex-grow flex flex-col justify-end space-y-1 overflow-y-auto pr-2",style:{maxHeight:"80px"},children:n?s.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm p-1.5 rounded-lg",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)(h.default,{src:e.imageUrl,alt:e.name,width:28,height:28,className:"rounded-md w-7 h-7 object-cover"}),(0,a.jsx)("span",{className:"text-xs font-medium truncate",children:e.name})]},e.id)):(0,a.jsx)("div",{className:"flex-grow flex items-center justify-center h-full"})}),(0,a.jsx)(y,{meals:s})]})]})};var k=s(6874),S=s.n(k),A=s(7334);let I={breakfast:[],lunch:[],snack:[],dinner:[]};function D(){var e;let[t,s]=(0,r.useState)(null),{toast:h}=(0,d.dj)(),[p,g]=(0,r.useState)(!0),j=(0,u.useRouter)(),[v,N]=(0,r.useState)(I),[y,k]=(0,r.useState)([]),D=(0,r.useCallback)(()=>{let e=c.j2.currentUser;if(!e)return I;try{let t=localStorage.getItem("dailyPlanData_".concat(e.uid));if(t){let{date:s,plan:a}=JSON.parse(t);if(s!==new Date().toISOString().split("T")[0])return localStorage.removeItem("dailyPlanData_".concat(e.uid)),I;return{breakfast:Array.isArray(a.breakfast)?a.breakfast:[],lunch:Array.isArray(a.lunch)?a.lunch:[],snack:Array.isArray(a.snack)?a.snack:[],dinner:Array.isArray(a.dinner)?a.dinner:[]}}}catch(e){console.error("Failed to parse daily plan",e)}return I},[]);(0,r.useEffect)(()=>{let e=c.j2.currentUser;if(!e){g(!1),j.replace("/welcome");return}g(!0),N(D());let t=new Date().toISOString().split("T")[0],a=(0,A.H9)(c.db,"users",e.uid),r=(0,A.aQ)(a,a=>{if(a.exists()){var r;let l=a.data();s(l);let n=localStorage.getItem("region_".concat(e.uid));localStorage.getItem("dailyPlanData_".concat(e.uid))&&l.region&&n&&n!==l.region&&(localStorage.removeItem("dailyPlanData_".concat(e.uid)),N(I),h({title:"R\xe9gion modifi\xe9e",description:"Vos statistiques ont \xe9t\xe9 r\xe9initialis\xe9es."})),l.region&&localStorage.setItem("region_".concat(e.uid),l.region),k((null==(r=l.dailyIntake)?void 0:r[t])||[])}else h({title:"Erreur",description:"Profil utilisateur non trouv\xe9",variant:"destructive"});g(!1)});return()=>r()},[j,h,D]);let _=e=>{j.push("/home/add-meal/".concat(e))},C=[...y,...Object.values(v).flat()],T=C.reduce((e,t)=>e+((null==t?void 0:t.calories)||0),0),M=C.reduce((e,t)=>(t&&t.macros&&(e.protein+=t.macros.protein||0,e.carbs+=t.macros.carbs||0,e.fat+=t.macros.fat||0),e),{protein:0,carbs:0,fat:0}),R=(null==t?void 0:t.calorieGoal)||2e3,O=(null==t?void 0:t.macroRatio)||{protein:150,carbs:250,fat:70},E=(0,i.GP)(new Date,"eeee d MMMM",{locale:o.fr}),P=e=>[...y.filter(t=>t.category===e),...v[e]];return p?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen bg-background",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)(l.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Chargement de votre plan..."})]})}):(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-primary pb-8",children:[(0,a.jsx)("header",{className:"flex-shrink-0 pt-4 pb-4"}),(0,a.jsx)(x.Zp,{className:"flex flex-col rounded-3xl shadow-lg",children:(0,a.jsxs)(x.Wu,{className:"p-4 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(f.eu,{className:"h-11 w-11 border-2 border-primary/20",children:[(0,a.jsx)(f.BK,{src:(null==t?void 0:t.photoURL)||"",alt:null==t?void 0:t.fullName}),(0,a.jsx)(f.q5,{children:null==t||null==(e=t.fullName)?void 0:e[0]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-lg font-bold font-heading text-foreground",children:["Bonjour, ",null==t?void 0:t.fullName,"!"]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground capitalize",children:["C'est ",E,"."]})]})]}),(0,a.jsx)(m.$,{asChild:!0,variant:"ghost",size:"icon",children:(0,a.jsx)(S(),{href:"/notifications",children:(0,a.jsx)(n.A,{})})})]}),(0,a.jsx)(b,{consumedCalories:T,calorieGoal:R,consumedMacros:M,macroGoals:O}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(w,{title:"Petit d\xe9jeuner",meals:P("breakfast"),onAdd:()=>_("breakfast"),defaultImage:"/img home/petit-dejeuner.png"}),(0,a.jsx)(w,{title:"D\xe9jeuner",meals:P("lunch"),onAdd:()=>_("lunch"),defaultImage:"/img home/dejeuner.png"}),(0,a.jsx)(w,{title:"D\xeener",meals:P("dinner"),onAdd:()=>_("dinner"),defaultImage:"/img home/dinner.png"}),(0,a.jsx)(w,{title:"Collation",meals:P("snack"),onAdd:()=>_("snack"),defaultImage:"/img home/snacks.png"})]})]})})]})}},56104:(e,t,s)=>{"use strict";let a,r,l,n,i;s.d(t,{IG:()=>n,db:()=>l,hJ:()=>i,j2:()=>r});var o=s(49868),c=s(46151),d=s(7334),u=s(46068);a=0===(0,o.Dk)().length?(0,o.Wp)({apiKey:"AIzaSyDhJXy_8JJ89CUMhj8iyldXvps_H5R7AHI",authDomain:"fithelath.firebaseapp.com",projectId:"fithelath",storageBucket:"fithelath.firebasestorage.app",messagingSenderId:"98685881966",appId:"1:98685881966:web:99d8147fde3b9b5847a07f"}):(0,o.Sx)(),r=(0,c.xI)(a),(0,c.oM)(r,c.F0).catch(e=>{console.error("Firebase persistence error:",e)}),l=(0,d.aU)(a),n=(0,u.c7)(a),i=new c.HF},59434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(61219),r=s(6967);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},66695:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>u,ZB:()=>c,Zp:()=>i,aR:()=>o});var a=s(95155),r=s(12115),l=s(46057),n=s(59434);let i=r.forwardRef((e,t)=>{let{className:s,as:r="div",asChild:i=!1,...o}=e,c=i?l.DX:r;return(0,a.jsx)(c,{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground",s),...o})});i.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});o.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});d.displayName="CardDescription";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});u.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},87481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>f});var a=s(12115);let r=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=i(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function f(){let[e,t]=a.useState(c);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},91394:(e,t,s)=>{"use strict";s.d(t,{BK:()=>o,eu:()=>i,q5:()=>c});var a=s(95155),r=s(12115),l=s(95419),n=s(59434);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.bL,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r})});i.displayName=l.bL.displayName;let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l._V,{ref:t,className:(0,n.cn)("aspect-square h-full w-full",s),...r})});o.displayName=l._V.displayName;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.H4,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r})});c.displayName=l.H4.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[310,1951,4595,8561,6766,6874,5547,8295,7287,8441,1684,7358],()=>t(14277)),_N_E=e.O()}]);
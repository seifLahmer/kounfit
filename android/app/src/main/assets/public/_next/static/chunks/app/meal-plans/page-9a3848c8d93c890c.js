(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1065],{332:(e,t,a)=>{"use strict";a.d(t,{O:()=>j});var r=a(95155);a(12115);var s=a(6874),l=a.n(s),o=a(35695),n=a(12348),c=a(56673),i=a(27657),d=a(24240),u=a(14846),f=a(59434),m=a(56104),h=a(87481),x=a(90010),p=a(66766);let y=[{href:"/profile",label:"Profil",icon:n.A},{href:"/meal-plans",label:"Favoris",icon:c.A},{href:"/home",label:"Accueil",icon:i.A},{href:"/shopping-list",label:"Panier",icon:d.A}];function g(){let e=(0,o.usePathname)(),t=(0,o.useRouter)(),{toast:a}=(0,h.dj)(),s=async()=>{try{await m.j2.signOut(),t.push("/welcome"),a({title:"D\xe9connexion r\xe9ussie"})}catch(e){a({title:"Erreur de d\xe9connexion",variant:"destructive"})}};return(0,r.jsx)("nav",{className:"fixed bottom-4 left-4 right-4 z-50 md:hidden",children:(0,r.jsxs)("div",{className:"relative flex justify-around items-center h-16 bg-white/70 backdrop-blur-md rounded-full shadow-lg border border-white/30",children:[y.map(t=>{let a=e===t.href||"/home"!==t.href&&e.startsWith(t.href);return(0,r.jsx)(l(),{href:t.href,className:"flex-1 flex justify-center items-center h-full",children:(0,r.jsx)("div",{className:(0,f.cn)("flex flex-col items-center justify-center gap-1 transition-colors",a?"text-primary":"text-gray-400 hover:text-primary"),children:(0,r.jsx)(t.icon,{className:"h-6 w-6"})})},t.href)}),(0,r.jsxs)(x.Lt,{children:[(0,r.jsx)(x.tv,{asChild:!0,children:(0,r.jsx)("button",{className:"flex-1 flex justify-center items-center h-full text-gray-400 hover:text-primary",children:(0,r.jsx)("div",{className:"flex flex-col items-center justify-center gap-1 transition-colors",children:(0,r.jsx)(u.A,{className:"h-6 w-6"})})})}),(0,r.jsxs)(x.EO,{className:"w-11/12 max-w-sm rounded-3xl bg-white",children:[(0,r.jsxs)(x.wd,{className:"text-center space-y-4",children:[(0,r.jsx)(p.default,{src:"/kounfit/kounfit black.png",alt:"Kounfit Logo",width:100,height:25,className:"mx-auto"}),(0,r.jsx)(x.r7,{className:"text-2xl font-bold",children:"D\xe9connexion"}),(0,r.jsx)(x.$v,{children:"\xcates-vous s\xfbr de vouloir vous d\xe9connecter ?"})]}),(0,r.jsxs)(x.ck,{className:"flex-col-reverse sm:flex-col-reverse gap-2",children:[(0,r.jsx)(x.Zr,{className:"w-full h-12 rounded-full border-gray-300",children:"Annuler"}),(0,r.jsx)(x.Rx,{onClick:s,className:"w-full h-12 rounded-full bg-secondary hover:bg-secondary/90",children:"D\xe9connexion"})]}),(0,r.jsx)("p",{className:"text-center text-sm text-muted-foreground mt-4",children:"\xc0 bient\xf4t sur Kounfit !"})]})]})]})})}function j(e){let{children:t}=e;return(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-background",children:[(0,r.jsx)("main",{className:"flex-1",children:t}),(0,r.jsx)(g,{})]})}},6844:(e,t,a)=>{"use strict";a.d(t,{$E:()=>d,Cy:()=>u,Hg:()=>n,XT:()=>f,qs:()=>i,rr:()=>c});var r=a(7334),s=a(56104),l=a(46068);let o="meals";async function n(e){try{return(await (0,r.gS)((0,r.rJ)(s.db,o),{...e,ratings:{average:0,count:0},createdAt:(0,r.O5)()})).id}catch(e){throw console.error("Error adding meal: ",e),Error("Could not save the meal.")}}async function c(e,t){let a=(0,r.H9)(s.db,o,e);if(t)try{let e=(0,l.KR)(s.IG,t);await (0,l.XR)(e)}catch(e){"storage/object-not-found"!==e.code&&console.error("Error deleting image from Storage: ",e)}try{await (0,r.kd)(a)}catch(e){throw console.error("Error deleting meal document: ",e),Error("Could not delete the meal.")}}async function i(e){try{let t=(0,r.rJ)(s.db,o),a=(0,r.P)(t,(0,r._M)("createdBy","==",e)),l=await (0,r.GG)(a),n=[];return l.forEach(e=>{let t=e.data();n.push({id:e.id,...t,createdAt:t.createdAt instanceof r.Dc?t.createdAt.toDate():new Date})}),n.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()),n}catch(e){throw console.error("Error fetching meals by caterer: ",e),Error("Could not fetch meals.")}}async function d(e,t){try{let a=(0,r.rJ)(s.db,"caterers"),l=(0,r.P)(a,(0,r._M)("region","==",t),(0,r._M)("status","==","approved")),n=await (0,r.GG)(l);if(n.empty)return[];let c=n.docs.map(e=>e.id),i=[];for(let e=0;e<c.length;e+=10)i.push(c.slice(e,e+10));let d=[];for(let t of i){let a=(0,r.rJ)(s.db,o),l=(0,r.P)(a,(0,r._M)("availability","==",!0),(0,r._M)("category","==",e),(0,r._M)("createdBy","in",t));(await (0,r.GG)(l)).forEach(e=>{let t=e.data();d.push({id:e.id,...t,createdAt:t.createdAt instanceof r.Dc?t.createdAt.toDate():new Date})})}return d.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()),d}catch(e){throw console.error("Error fetching available meals: ",e),Error("Could not fetch available meals.")}}async function u(e){try{let t=(0,r.H9)(s.db,o,e),a=await (0,r.x7)(t);if(!a.exists())return null;let l=a.data();return{id:a.id,...l,createdAt:l.createdAt instanceof r.Dc?l.createdAt.toDate():new Date}}catch(e){throw console.error("Error fetching meal by ID: ",e),Error("Could not fetch the meal.")}}async function f(e){if(!e||0===e.length)return[];try{let t=[];for(let a=0;a<e.length;a+=10)t.push(e.slice(a,a+10));let a=[];for(let e of t){let t=(0,r.rJ)(s.db,o),l=(0,r.P)(t,(0,r._M)((0,r.Fs)(),"in",e));(await (0,r.GG)(l)).forEach(e=>{let t=e.data();a.push({id:e.id,...t,createdAt:t.createdAt instanceof r.Dc?t.createdAt.toDate():new Date})})}return a}catch(e){throw console.error("Error fetching favorite meals: ",e),Error("Could not fetch favorite meals.")}}},12348:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(31291).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},14846:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(31291).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},20174:(e,t,a)=>{Promise.resolve().then(a.bind(a,29383))},24240:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(31291).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},27657:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(31291).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},29383:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var r=a(95155),s=a(332),l=a(30285),o=a(66695),n=a(6723),c=a(56673),i=a(55401),d=a(56104),u=a(35695),f=a(12115),m=a(88468),h=a(6844),x=a(66766),p=a(13262);function y(){let e=(0,u.useRouter)(),[t,a]=(0,f.useState)(!0),[y,g]=(0,f.useState)([]),[j,v]=(0,f.useState)(null);return((0,f.useEffect)(()=>{let t=d.j2.onAuthStateChanged(async t=>{if(t){a(!0);try{let e=await (0,m.VM)(t.uid);if(v(e),e&&e.favoriteMealIds){let t=await (0,h.XT)(e.favoriteMealIds);g(t)}}catch(e){console.error(e)}finally{a(!1)}}else e.replace("/welcome")});return()=>t()},[e]),t)?(0,r.jsx)(s.O,{children:(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(n.A,{className:"h-8 w-8 animate-spin text-primary"})})}):(0,r.jsx)(s.O,{children:(0,r.jsxs)("div",{className:"flex-1 space-y-4 p-4 sm:p-8 pt-6 bg-gradient-to-b from-[#a2fcdc] to-background min-h-full",children:[(0,r.jsx)("div",{className:"flex items-center justify-between space-y-2",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[(0,r.jsx)(c.A,{className:"text-destructive"}),"Vos Favoris"]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Votre collection de repas pr\xe9f\xe9r\xe9s."})]})}),y.length>0?(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4",children:y.map(e=>(0,r.jsxs)(o.Zp,{className:"relative overflow-hidden rounded-2xl border shadow-sm h-56 group",children:[(0,r.jsxs)("div",{className:"absolute inset-0 z-0",children:[(0,r.jsx)(x.default,{src:e.imageUrl,alt:e.name,layout:"fill",objectFit:"cover",className:"w-full h-full transition-transform duration-300 group-hover:scale-105","data-ai-hint":"healthy food"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"})]}),(0,r.jsx)(o.Wu,{className:"relative z-10 p-3 flex flex-col justify-end h-full text-white",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold text-base truncate",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.jsx)(p.DL,{className:"w-3 h-3 text-primary"}),(0,r.jsxs)("span",{className:"font-medium text-sm",children:[e.calories," kcal"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs mt-1",children:[(0,r.jsx)("span",{className:"font-semibold text-protein",children:"P"}),(0,r.jsxs)("span",{children:[e.macros.protein,"g"]}),(0,r.jsx)("span",{className:"font-semibold text-primary",children:"C"}),(0,r.jsxs)("span",{children:[e.macros.carbs,"g"]}),(0,r.jsx)("span",{className:"font-semibold text-fat",children:"F"}),(0,r.jsxs)("span",{children:[e.macros.fat,"g"]})]})]})})]},e.id))}):(0,r.jsxs)("div",{className:"pt-8 text-center text-muted-foreground border-2 border-dashed rounded-lg p-12",children:[(0,r.jsx)(i.A,{className:"w-12 h-12 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Aucun repas favori pour l'instant."}),(0,r.jsx)("p",{className:"text-sm",children:"Cliquez sur le cÅ“ur d'un repas pour l'ajouter ici."}),(0,r.jsx)(l.$,{className:"mt-4 bg-primary hover:bg-primary/90",onClick:()=>e.push("/home/add-meal/lunch"),children:"D\xe9couvrir des repas"})]})]})})}},35695:(e,t,a)=>{"use strict";var r=a(18999);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},55401:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(31291).A)("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]])},56104:(e,t,a)=>{"use strict";let r,s,l,o,n;a.d(t,{IG:()=>o,db:()=>l,hJ:()=>n,j2:()=>s});var c=a(49868),i=a(46151),d=a(7334),u=a(46068);r=0===(0,c.Dk)().length?(0,c.Wp)({apiKey:"AIzaSyDhJXy_8JJ89CUMhj8iyldXvps_H5R7AHI",authDomain:"fithelath.firebaseapp.com",projectId:"fithelath",storageBucket:"fithelath.firebasestorage.app",messagingSenderId:"98685881966",appId:"1:98685881966:web:99d8147fde3b9b5847a07f"}):(0,c.Sx)(),s=(0,i.xI)(r),(0,i.oM)(s,i.F0).catch(e=>{console.error("Firebase persistence error:",e)}),l=(0,d.aU)(r),o=(0,u.c7)(r),n=new i.HF},56673:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(31291).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>u,ZB:()=>i,Zp:()=>n,aR:()=>c});var r=a(95155),s=a(12115),l=a(46057),o=a(59434);let n=s.forwardRef((e,t)=>{let{className:a,as:s="div",asChild:n=!1,...c}=e,i=n?l.DX:s;return(0,r.jsx)(i,{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground",a),...c})});n.displayName="Card";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",a),...s})});c.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});i.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",a),...s})});u.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>f});var r=a(12115);let s=0,l=new Map,o=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?o(a):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],i={toasts:[]};function d(e){i=n(i,e),c.forEach(e=>{e(i)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=r.useState(i);return r.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},88468:(e,t,a)=>{"use strict";a.d(t,{Of:()=>i,VM:()=>c,eg:()=>n,hE:()=>u,jS:()=>d});var r=a(7334),s=a(56104),l=a(46151);let o="users";async function n(e,t){try{let a=(0,r.H9)(s.db,o,e),l=await (0,r.x7)(a),n={};Object.keys(t).forEach(e=>{let a=t[e];void 0!==a&&(n[e]=a)}),delete n.role;let c={...n,uid:e,role:"client",updatedAt:(0,r.O5)(),...l.exists()?{}:{createdAt:(0,r.O5)()}};await (0,r.BN)(a,c,{merge:!0})}catch(e){throw console.error("Error in updateUserProfile: ",e),Error("Failed to update user profile: ".concat(e))}}async function c(e){try{if(!e)return null;let t=(0,r.H9)(s.db,o,e),a=await (0,r.x7)(t);if(!a.exists())return null;{let e=a.data();return e.createdAt&&e.createdAt instanceof r.Dc&&(e.createdAt=e.createdAt.toDate()),e.updatedAt&&e.updatedAt instanceof r.Dc&&(e.updatedAt=e.updatedAt.toDate()),e}}catch(e){throw console.error("Could not fetch user profile.",e),Error("Could not fetch user profile.")}}async function i(e,t){let a=(0,r.H9)(s.db,o,e);try{let e,s=await (0,r.x7)(a);if(!s.exists())throw Error("User profile not found.");let l=s.data().favoriteMealIds||[];return l.includes(t)?(await (0,r.mZ)(a,{favoriteMealIds:(0,r.C3)(t)}),e=l.filter(e=>e!==t)):(await (0,r.mZ)(a,{favoriteMealIds:(0,r.hq)(t)}),e=[...l,t]),e}catch(e){throw console.error("Error toggling favorite meal: ",e),Error("Could not update favorites.")}}async function d(){try{let e=(0,r.rJ)(s.db,o);return(await (0,r.d_)(e)).data().count}catch(e){throw console.error("Error getting user count: ",e),Error("Could not get user count.")}}async function u(e){try{await (0,l.J1)(s.j2,e)}catch(e){throw console.error("Error sending password reset email: ",e),Error("Failed to send password reset email.")}}},90010:(e,t,a)=>{"use strict";a.d(t,{$v:()=>p,EO:()=>f,Lt:()=>c,Rx:()=>y,Zr:()=>g,ck:()=>h,r7:()=>x,tv:()=>i,wd:()=>m});var r=a(95155),s=a(12115),l=a(46328),o=a(59434),n=a(30285);let c=l.bL,i=l.l9,d=l.ZL,u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});u.displayName=l.hJ.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsx)(l.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]})});f.displayName=l.UC.displayName;let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};m.displayName="AlertDialogHeader";let h=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};h.displayName="AlertDialogFooter";let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold",a),...s})});x.displayName=l.hE.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});p.displayName=l.VY.displayName;let y=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.rc,{ref:t,className:(0,o.cn)((0,n.r)(),a),...s})});y.displayName=l.rc.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.ZD,{ref:t,className:(0,o.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...s})});g.displayName=l.ZD.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[310,1951,4595,8561,6766,9247,4734,6874,6328,2678,8441,1684,7358],()=>t(20174)),_N_E=e.O()}]);
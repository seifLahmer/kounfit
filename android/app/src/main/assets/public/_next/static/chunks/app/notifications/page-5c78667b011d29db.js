(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6173],{332:(e,t,a)=>{"use strict";a.d(t,{O:()=>y});var s=a(95155);a(12115);var r=a(6874),i=a.n(r),n=a(35695),l=a(12348),o=a(56673),c=a(27657),d=a(24240),f=a(14846),u=a(59434),m=a(56104),x=a(87481),h=a(90010),p=a(66766);let g=[{href:"/profile",label:"Profil",icon:l.A},{href:"/meal-plans",label:"Favoris",icon:o.A},{href:"/home",label:"Accueil",icon:c.A},{href:"/shopping-list",label:"Panier",icon:d.A}];function v(){let e=(0,n.usePathname)(),t=(0,n.useRouter)(),{toast:a}=(0,x.dj)(),r=async()=>{try{await m.j2.signOut(),t.push("/welcome"),a({title:"D\xe9connexion r\xe9ussie"})}catch(e){a({title:"Erreur de d\xe9connexion",variant:"destructive"})}};return(0,s.jsx)("nav",{className:"fixed bottom-4 left-4 right-4 z-50 md:hidden",children:(0,s.jsxs)("div",{className:"relative flex justify-around items-center h-16 bg-white/70 backdrop-blur-md rounded-full shadow-lg border border-white/30",children:[g.map(t=>{let a=e===t.href||"/home"!==t.href&&e.startsWith(t.href);return(0,s.jsx)(i(),{href:t.href,className:"flex-1 flex justify-center items-center h-full",children:(0,s.jsx)("div",{className:(0,u.cn)("flex flex-col items-center justify-center gap-1 transition-colors",a?"text-primary":"text-gray-400 hover:text-primary"),children:(0,s.jsx)(t.icon,{className:"h-6 w-6"})})},t.href)}),(0,s.jsxs)(h.Lt,{children:[(0,s.jsx)(h.tv,{asChild:!0,children:(0,s.jsx)("button",{className:"flex-1 flex justify-center items-center h-full text-gray-400 hover:text-primary",children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center gap-1 transition-colors",children:(0,s.jsx)(f.A,{className:"h-6 w-6"})})})}),(0,s.jsxs)(h.EO,{className:"w-11/12 max-w-sm rounded-3xl bg-white",children:[(0,s.jsxs)(h.wd,{className:"text-center space-y-4",children:[(0,s.jsx)(p.default,{src:"/kounfit/kounfit black.png",alt:"Kounfit Logo",width:100,height:25,className:"mx-auto"}),(0,s.jsx)(h.r7,{className:"text-2xl font-bold",children:"D\xe9connexion"}),(0,s.jsx)(h.$v,{children:"\xcates-vous s\xfbr de vouloir vous d\xe9connecter ?"})]}),(0,s.jsxs)(h.ck,{className:"flex-col-reverse sm:flex-col-reverse gap-2",children:[(0,s.jsx)(h.Zr,{className:"w-full h-12 rounded-full border-gray-300",children:"Annuler"}),(0,s.jsx)(h.Rx,{onClick:r,className:"w-full h-12 rounded-full bg-secondary hover:bg-secondary/90",children:"D\xe9connexion"})]}),(0,s.jsx)("p",{className:"text-center text-sm text-muted-foreground mt-4",children:"\xc0 bient\xf4t sur Kounfit !"})]})]})]})})}function y(e){let{children:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col min-h-screen bg-background",children:[(0,s.jsx)("main",{className:"flex-1",children:t}),(0,s.jsx)(v,{})]})}},5800:(e,t,a)=>{Promise.resolve().then(a.bind(a,27435))},22024:(e,t,a)=>{"use strict";a.d(t,{Tr:()=>l,UI:()=>n,bA:()=>o});var s=a(7334),r=a(56104);let i="notifications";async function n(e,t){try{await (0,s.gS)((0,s.rJ)(r.db,i),{userId:e,message:t,isRead:!1,createdAt:(0,s.O5)()})}catch(e){console.error("Error creating notification: ",e)}}async function l(e){try{let t=(0,s.rJ)(r.db,i),a=(0,s.P)(t,(0,s._M)("userId","==",e)),n=await (0,s.GG)(a),l=[];return n.forEach(e=>{let t=e.data();l.push({id:e.id,...t,createdAt:t.createdAt instanceof s.Dc?t.createdAt.toDate():new Date})}),l.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()),l.slice(0,20)}catch(e){throw console.error("Error fetching notifications: ",e),Error("Could not fetch notifications.")}}async function o(e){try{let t=(0,s.H9)(r.db,i,e);await (0,s.mZ)(t,{isRead:!0})}catch(e){throw console.error("Error marking notification as read: ",e),Error("Could not update the notification.")}}},27435:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(95155),r=a(12115),i=a(35695),n=a(332),l=a(30285),o=a(66695),c=a(70048),d=a(22318),f=a(6723),u=a(23901),m=a(55401),x=a(56104),h=a(22024),p=a(87481),g=a(59434),v=a(42974),y=a(59171);function j(){let[e,t]=(0,r.useState)([]),[a,j]=(0,r.useState)(!0),N=(0,i.useRouter)(),{toast:b}=(0,p.dj)();(0,r.useEffect)(()=>{let e=x.j2.onAuthStateChanged(async e=>{if(e){j(!0);try{let a=await (0,h.Tr)(e.uid);t(a)}catch(e){b({title:"Erreur",description:"Impossible de charger les notifications.",variant:"destructive"})}finally{j(!1)}}else N.replace("/login")});return()=>e()},[N,b]);let w=async e=>{try{await (0,h.bA)(e),t(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t))}catch(e){b({title:"Erreur",description:"Impossible de marquer la notification comme lue.",variant:"destructive"})}};return(0,s.jsx)(n.O,{children:(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[(0,s.jsxs)("header",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>N.back(),children:(0,s.jsx)(c.A,{})}),(0,s.jsxs)("h1",{className:"text-2xl font-bold font-heading flex items-center gap-2",children:[(0,s.jsx)(d.A,{className:"text-primary"})," Notifications"]})]}),a?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)(f.A,{className:"w-12 h-12 animate-spin text-primary"})}):e.length>0?(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,s.jsx)(o.Zp,{className:(0,g.cn)("transition-colors",e.isRead?"bg-card":"bg-primary/10"),children:(0,s.jsxs)(o.Wu,{className:"p-4 flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm",children:e.message}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:(0,v.m)(e.createdAt,{addSuffix:!0,locale:y.fr})})]}),!e.isRead&&(0,s.jsxs)(l.$,{size:"sm",variant:"ghost",onClick:()=>w(e.id),className:"flex items-center gap-1",children:[(0,s.jsx)(u.A,{className:"w-4 h-4"}),"Marquer comme lu"]})]})},e.id))}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center text-center text-muted-foreground pt-16",children:[(0,s.jsx)(m.A,{className:"w-16 h-16 mb-4"}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Aucune notification"}),(0,s.jsx)("p",{children:"Vos nouvelles alertes appara\xeetront ici."})]})]})})}},30285:(e,t,a)=>{"use strict";a.d(t,{$:()=>c,r:()=>o});var s=a(95155),r=a(12115),i=a(46057),n=a(63999),l=a(59434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:c=!1,...d}=e,f=c?i.DX:"button";return(0,s.jsx)(f,{className:(0,l.cn)(o({variant:r,size:n,className:a})),ref:t,...d})});c.displayName="Button"},56104:(e,t,a)=>{"use strict";let s,r,i,n,l;a.d(t,{IG:()=>n,db:()=>i,hJ:()=>l,j2:()=>r});var o=a(49868),c=a(46151),d=a(7334),f=a(46068);s=0===(0,o.Dk)().length?(0,o.Wp)({apiKey:"AIzaSyDhJXy_8JJ89CUMhj8iyldXvps_H5R7AHI",authDomain:"fithelath.firebaseapp.com",projectId:"fithelath",storageBucket:"fithelath.firebasestorage.app",messagingSenderId:"98685881966",appId:"1:98685881966:web:99d8147fde3b9b5847a07f"}):(0,o.Sx)(),r=(0,c.xI)(s),(0,c.oM)(r,c.F0).catch(e=>{console.error("Firebase persistence error:",e)}),i=(0,d.aU)(s),n=(0,f.c7)(s),l=new c.HF},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var s=a(61219),r=a(6967);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>f,ZB:()=>c,Zp:()=>l,aR:()=>o});var s=a(95155),r=a(12115),i=a(46057),n=a(59434);let l=r.forwardRef((e,t)=>{let{className:a,as:r="div",asChild:l=!1,...o}=e,c=l?i.DX:r;return(0,s.jsx)(c,{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground",a),...o})});l.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});o.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});f.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var s=a(12115);let r=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function f(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=s.useState(c);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:f,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},90010:(e,t,a)=>{"use strict";a.d(t,{$v:()=>p,EO:()=>u,Lt:()=>o,Rx:()=>g,Zr:()=>v,ck:()=>x,r7:()=>h,tv:()=>c,wd:()=>m});var s=a(95155),r=a(12115),i=a(46328),n=a(59434),l=a(30285);let o=i.bL,c=i.l9,d=i.ZL,f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});f.displayName=i.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(f,{}),(0,s.jsx)(i.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});u.displayName=i.UC.displayName;let m=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};m.displayName="AlertDialogHeader";let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="AlertDialogFooter";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold",a),...r})});h.displayName=i.hE.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});p.displayName=i.VY.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.rc,{ref:t,className:(0,n.cn)((0,l.r)(),a),...r})});g.displayName=i.rc.displayName;let v=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.ZD,{ref:t,className:(0,n.cn)((0,l.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});v.displayName=i.ZD.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[310,1951,4595,8561,6766,9247,4734,6874,6328,5547,1921,8441,1684,7358],()=>t(5800)),_N_E=e.O()}]);
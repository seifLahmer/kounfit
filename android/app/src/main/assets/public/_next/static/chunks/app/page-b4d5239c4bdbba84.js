(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{14774:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(46151),i=r(56104),s=r(12115),l=r(7334);function o(){let[e,t]=(0,s.useState)(null),[r,o]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=(0,n.hg)(i.j2,async e=>{if(e){let r=!1;for(let n of["users","caterers","deliveryPeople","admins"])try{let s=(0,l.H9)(i.db,n,e.uid),o=await (0,l.x7)(s);if(o.exists()){t(o.data()),r=!0;break}}catch(e){console.error("Error checking collection ".concat(n,":"),e)}r||t(null)}else t(null);o(!1)});return()=>e()},[]),{user:e,loading:r}}},32751:(e,t,r)=>{Promise.resolve().then(r.bind(r,33792))},33792:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(95155),i=r(12115),s=r(35695),l=r(51307),o=r(67489),a=r(66766),c=r(14774),u=r(83065);function d(){let e=(0,s.useRouter)(),{user:t,loading:r}=(0,c.Z)(),[d,h]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{r||(async()=>{if(t)try{let r=await (0,u.u)(t.uid);switch(console.log(r),r){case"caterer":e.replace("/caterer");break;case"admin":e.replace("/admin");break;case"delivery":e.replace("/delivery");break;case"client":e.replace("/home");break;default:e.replace("/welcome")}}catch(t){console.error("Erreur r\xe9cup\xe9ration r\xf4le :",t),e.replace("/welcome")}else{console.log("time out ");let t=setTimeout(()=>{e.replace("/welcome")},4e3);return()=>clearTimeout(t)}})()},[t,r,e]),r||t)?null:(0,n.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white overflow-hidden",children:(0,n.jsxs)(l.P.div,{className:"flex items-center",initial:{y:"50vh",x:"0%",scale:.8,opacity:0},animate:{y:[null,0,-25,0,-10,0],x:[null,"-5%","-5%","-20%","-20%","-20%"],scale:[null,1,1,1,1,1],opacity:[null,1,1,1,1,1]},transition:{duration:2.5,ease:"easeOut",times:[0,.4,.6,.8,.9,1],delay:.2},onAnimationComplete:()=>h(!0),children:[(0,n.jsx)(l.P.div,{children:(0,n.jsx)(a.default,{src:"/k/k green.png",alt:"Kounfit Logo K",width:80,height:80,priority:!0})}),(0,n.jsx)("div",{className:"relative overflow-hidden",children:(0,n.jsx)(o.N,{children:d&&(0,n.jsx)(l.P.div,{initial:{x:"-100%",opacity:0},animate:{x:"-10px",opacity:1},transition:{delay:.3,duration:.5,ease:"easeOut"},children:(0,n.jsx)(a.default,{src:"/k/ounfit.png",alt:"ounfit",width:220,height:100,priority:!0})})})})]})})}},35695:(e,t,r)=>{"use strict";var n=r(18999);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},56104:(e,t,r)=>{"use strict";let n,i,s,l,o;r.d(t,{IG:()=>l,db:()=>s,hJ:()=>o,j2:()=>i});var a=r(49868),c=r(46151),u=r(7334),d=r(46068);n=0===(0,a.Dk)().length?(0,a.Wp)({apiKey:"AIzaSyDhJXy_8JJ89CUMhj8iyldXvps_H5R7AHI",authDomain:"fithelath.firebaseapp.com",projectId:"fithelath",storageBucket:"fithelath.firebasestorage.app",messagingSenderId:"98685881966",appId:"1:98685881966:web:99d8147fde3b9b5847a07f"}):(0,a.Sx)(),i=(0,c.xI)(n),(0,c.oM)(i,c.F0).catch(e=>{console.error("Firebase persistence error:",e)}),s=(0,u.aU)(n),l=(0,d.c7)(n),o=new c.HF},67489:(e,t,r)=>{"use strict";r.d(t,{N:()=>g});var n=r(95155),i=r(12115),s=r(75850),l=r(9894),o=r(36876),a=r(82829);class c extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function u(e){let{children:t,isPresent:r}=e,s=(0,i.useId)(),l=(0,i.useRef)(null),o=(0,i.useRef)({width:0,height:0,top:0,left:0}),{nonce:u}=(0,i.useContext)(a.Q);return(0,i.useInsertionEffect)(()=>{let{width:e,height:t,top:n,left:i}=o.current;if(r||!l.current||!e||!t)return;l.current.dataset.motionPopId=s;let a=document.createElement("style");return u&&(a.nonce=u),document.head.appendChild(a),a.sheet&&a.sheet.insertRule('\n          [data-motion-pop-id="'.concat(s,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(n,"px !important;\n            left: ").concat(i,"px !important;\n          }\n        ")),()=>{document.head.removeChild(a)}},[r]),(0,n.jsx)(c,{isPresent:r,childRef:l,sizeRef:o,children:i.cloneElement(t,{ref:l})})}let d=e=>{let{children:t,initial:r,isPresent:s,onExitComplete:a,custom:c,presenceAffectsLayout:d,mode:f}=e,p=(0,l.M)(h),m=(0,i.useId)(),x=(0,i.useCallback)(e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;a&&a()},[p,a]),g=(0,i.useMemo)(()=>({id:m,initial:r,isPresent:s,custom:c,onExitComplete:x,register:e=>(p.set(e,!1),()=>p.delete(e))}),d?[Math.random(),x]:[s,x]);return(0,i.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[s]),i.useEffect(()=>{s||p.size||!a||a()},[s]),"popLayout"===f&&(t=(0,n.jsx)(u,{isPresent:s,children:t})),(0,n.jsx)(o.t.Provider,{value:g,children:t})};function h(){return new Map}var f=r(95915);let p=e=>e.key||"";function m(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}var x=r(49655);let g=e=>{let{children:t,custom:r,initial:o=!0,onExitComplete:a,presenceAffectsLayout:c=!0,mode:u="sync",propagate:h=!1}=e,[g,v]=(0,f.xQ)(h),y=(0,i.useMemo)(()=>m(t),[t]),w=h&&!g?[]:y.map(p),b=(0,i.useRef)(!0),k=(0,i.useRef)(y),j=(0,l.M)(()=>new Map),[E,P]=(0,i.useState)(y),[R,C]=(0,i.useState)(y);(0,x.E)(()=>{b.current=!1,k.current=y;for(let e=0;e<R.length;e++){let t=p(R[e]);w.includes(t)?j.delete(t):!0!==j.get(t)&&j.set(t,!1)}},[R,w.length,w.join("-")]);let I=[];if(y!==E){let e=[...y];for(let t=0;t<R.length;t++){let r=R[t],n=p(r);w.includes(n)||(e.splice(t,0,r),I.push(r))}"wait"===u&&I.length&&(e=I),C(m(e)),P(y);return}let{forceRender:M}=(0,i.useContext)(s.L);return(0,n.jsx)(n.Fragment,{children:R.map(e=>{let t=p(e),i=(!h||!!g)&&(y===R||w.includes(t));return(0,n.jsx)(d,{isPresent:i,initial:(!b.current||!!o)&&void 0,custom:i?void 0:r,presenceAffectsLayout:c,mode:u,onExitComplete:i?void 0:()=>{if(!j.has(t))return;j.set(t,!0);let e=!0;j.forEach(t=>{t||(e=!1)}),e&&(null==M||M(),C(k.current),h&&(null==v||v()),a&&a())},children:e},t)})})}},83065:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});var n=r(7334),i=r(56104);async function s(e){if(!e)return"unknown";for(let t of(console.log(e),[{name:"admins",role:"admin"},{name:"caterers",role:"caterer"},{name:"deliveryPeople",role:"delivery"},{name:"users",role:"client"}])){console.log("hiiiiiii");try{let r=(0,n.H9)(i.db,t.name,e);if((await (0,n.x7)(r)).exists())return console.log(t.role),t.role}catch(e){if("permission-denied"!==e.code)return console.error("Error checking role in '".concat(t.name,"':"),e),"unknown";console.log("hello");continue}}return"error"}}},e=>{var t=t=>e(e.s=t);e.O(0,[310,1951,4595,6766,1307,8441,1684,7358],()=>t(32751)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9451],{17759:(e,t,r)=>{"use strict";r.d(t,{C5:()=>x,MJ:()=>h,eI:()=>f,lV:()=>d,zB:()=>u});var s=r(95155),a=r(12115),l=r(46057),i=r(29642),n=r(59434),o=r(85057);let d=i.Op,c=a.createContext({}),u=e=>{let{...t}=e;return(0,s.jsx)(c.Provider,{value:{name:t.name},children:(0,s.jsx)(i.xI,{...t})})},p=()=>{let e=a.useContext(c),t=a.useContext(m),{getFieldState:r,formState:s}=(0,i.xW)(),l=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...l}},m=a.createContext({}),f=a.forwardRef((e,t)=>{let{className:r,...l}=e,i=a.useId();return(0,s.jsx)(m.Provider,{value:{id:i},children:(0,s.jsx)("div",{ref:t,className:(0,n.cn)("space-y-2",r),...l})})});f.displayName="FormItem",a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:l,formItemId:i}=p();return(0,s.jsx)(o.J,{ref:t,className:(0,n.cn)(l&&"text-destructive",r),htmlFor:i,...a})}).displayName="FormLabel";let h=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:i,formDescriptionId:n,formMessageId:o}=p();return(0,s.jsx)(l.DX,{ref:t,id:i,"aria-describedby":a?"".concat(n," ").concat(o):"".concat(n),"aria-invalid":!!a,...r})});h.displayName="FormControl",a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:l}=p();return(0,s.jsx)("p",{ref:t,id:l,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})}).displayName="FormDescription";let x=a.forwardRef((e,t)=>{var r;let{className:a,children:l,...i}=e,{error:o,formMessageId:d}=p(),c=o?String(null!=(r=null==o?void 0:o.message)?r:""):l;return c?(0,s.jsx)("p",{ref:t,id:d,className:(0,n.cn)("text-sm font-medium text-destructive",a),...i,children:c}):null});x.displayName="FormMessage"},19249:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(31291).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},36465:(e,t,r)=>{"use strict";r.d(t,{P:()=>c,TH:()=>n,p:()=>d,xY:()=>i,z7:()=>o});var s=r(7334),a=r(56104);let l="deliveryPeople";async function i(e){try{let t=(0,s.H9)(a.db,l,e.uid);await (0,s.BN)(t,{...e,role:"delivery",status:e.status||"pending"})}catch(e){throw console.error("Error adding delivery person: ",e),Error("Could not add the delivery person.")}}async function n(e,t){try{let r=(0,s.H9)(a.db,l,e);await (0,s.mZ)(r,t)}catch(e){throw console.error("Error updating delivery person profile: ",e),Error("Could not update delivery person profile.")}}async function o(){try{return(await (0,s.GG)((0,s.rJ)(a.db,l))).docs.map(e=>({uid:e.id,...e.data()}))}catch(e){throw console.error("Error fetching all delivery people:",e),Error("Could not fetch delivery people.")}}async function d(){try{let e=(0,s.P)((0,s.rJ)(a.db,l),(0,s._M)("status","==","pending"));return(await (0,s.GG)(e)).docs.map(e=>({uid:e.id,...e.data()}))}catch(e){throw console.error("Error fetching pending delivery people:",e),Error("Could not fetch pending delivery people.")}}async function c(e,t){try{let r=(0,s.H9)(a.db,l,e);await (0,s.mZ)(r,{status:t})}catch(e){throw console.error("Error updating delivery person status:",e),Error("Could not update delivery person status.")}}},36650:(e,t,r)=>{Promise.resolve().then(r.bind(r,49441))},41630:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(31291).A)("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]])},49441:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var s=r(95155),a=r(35695),l=r(29642),i=r(75288),n=r(52651),o=r(30285),d=r(17759),c=r(59409),u=r(56104),p=r(36465),m=r(12115),f=r(87481),h=r(46151),x=r(6723),y=r(23901),v=r(41630),g=r(19249),j=r(13262),b=r(66766);let w=n.Ik({vehicleType:n.k5(["scooter","car","bicycle"],{required_error:"Veuillez s\xe9lectionner un type de v\xe9hicule."}),region:n.Yj({required_error:"Veuillez s\xe9lectionner votre r\xe9gion."})});function N(){let e=(0,a.useRouter)(),[t,r]=(0,m.useState)(!1),{toast:n}=(0,f.dj)(),[N,S]=(0,m.useState)(!1),E=(0,l.mN)({resolver:(0,i.u)(w),defaultValues:{vehicleType:"scooter",region:"grand tunis"}});(0,m.useEffect)(()=>{let t=(0,h.hg)(u.j2,t=>{t?S(!0):e.replace("/login")});return()=>t()},[e]);let A=async t=>{r(!0);let s=u.j2.currentUser;if(!s||!s.email){n({title:"Erreur",description:"Utilisateur non trouv\xe9. Veuillez vous reconnecter.",variant:"destructive"}),e.push("/login");return}try{await (0,p.xY)({uid:s.uid,name:s.displayName||"N/A",email:s.email,vehicleType:t.vehicleType,region:t.region,status:"pending"}),await (0,h.gA)(s),e.push("/signup/pending-approval")}catch(e){console.error("Signup Delivery Step 2 Error:",e),n({title:"Erreur",description:"Impossible de sauvegarder votre profil.",variant:"destructive"})}finally{r(!1)}};return N?(0,s.jsxs)("div",{className:"min-h-screen bg-[#F6F8F7] flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[(0,s.jsx)(j.dS,{className:"absolute inset-0 w-full h-full text-gray-400/50"}),(0,s.jsxs)("div",{className:"relative w-full max-w-lg bg-white/70 backdrop-blur-md rounded-3xl shadow-2xl flex flex-col",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-b from-[#22C58B] to-[#0B7E58] rounded-t-3xl text-white text-center p-6 space-y-3 rounded-b-2xl",children:[(0,s.jsx)(b.default,{src:"/kounfit/kounfit white.png",alt:"Kounfit Logo",width:40,height:40,className:"mx-auto"}),(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Inscription Livreur"}),(0,s.jsx)("p",{className:"text-lg font-medium",children:"– Etape 2/2 –"}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 pt-2",children:[(0,s.jsx)("div",{className:"w-16 h-px bg-white/30"}),(0,s.jsx)("div",{className:"w-5 h-5 bg-white/30 rounded-full"}),(0,s.jsx)("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center text-[#0B7E58]",children:(0,s.jsx)(y.A,{size:14,strokeWidth:3})}),(0,s.jsx)("div",{className:"w-16 h-px bg-white/30"})]})]}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)(d.lV,{...E,children:(0,s.jsxs)("form",{onSubmit:E.handleSubmit(A),className:"space-y-4",children:[(0,s.jsx)(d.zB,{control:E.control,name:"vehicleType",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsxs)(c.l6,{onValueChange:t.onChange,value:t.value,children:[(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.bq,{className:"bg-white/50 rounded-xl p-3 h-14 border-none",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(v.A,{className:"text-gray-500 h-6 w-6"}),(0,s.jsx)(c.yv,{placeholder:"Type de v\xe9hicule"})]})})}),(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(c.eb,{value:"scooter",children:"Scooter"}),(0,s.jsx)(c.eb,{value:"car",children:"Voiture"}),(0,s.jsx)(c.eb,{value:"bicycle",children:"V\xe9lo"})]})]}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:E.control,name:"region",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsxs)(c.l6,{onValueChange:t.onChange,value:t.value,children:[(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.bq,{className:"bg-white/50 rounded-xl p-3 h-14 border-none",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(g.A,{className:"text-gray-500 h-6 w-6"}),(0,s.jsx)(c.yv,{placeholder:"S\xe9lectionnez votre r\xe9gion"})]})})}),(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(c.eb,{value:"grand tunis",children:"Grand Tunis"}),(0,s.jsx)(c.eb,{value:"nabeul",children:"Nabeul"}),(0,s.jsx)(c.eb,{value:"sousse",children:"Sousse"}),(0,s.jsx)(c.eb,{value:"sfax",children:"Sfax"}),(0,s.jsx)(c.eb,{value:"bizerte",children:"Bizerte"})]})]}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsxs)(o.$,{type:"submit",className:"w-full h-14 text-lg font-semibold rounded-full bg-secondary hover:bg-secondary/90 text-white",disabled:t,children:[t&&(0,s.jsx)(x.A,{className:"mr-2 h-5 w-5 animate-spin"}),"Terminer"]}),(0,s.jsx)(o.$,{type:"button",variant:"link",className:"w-full text-muted-foreground",onClick:()=>e.back(),children:"Retour"})]})})})]})]}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-[#F6F8F7]",children:(0,s.jsx)(x.A,{className:"h-12 w-12 animate-spin text-primary"})})}},56104:(e,t,r)=>{"use strict";let s,a,l,i,n;r.d(t,{IG:()=>i,db:()=>l,hJ:()=>n,j2:()=>a});var o=r(49868),d=r(46151),c=r(7334),u=r(46068);s=0===(0,o.Dk)().length?(0,o.Wp)({apiKey:"AIzaSyDhJXy_8JJ89CUMhj8iyldXvps_H5R7AHI",authDomain:"fithelath.firebaseapp.com",projectId:"fithelath",storageBucket:"fithelath.firebasestorage.app",messagingSenderId:"98685881966",appId:"1:98685881966:web:99d8147fde3b9b5847a07f"}):(0,o.Sx)(),a=(0,d.xI)(s),(0,d.oM)(a,d.F0).catch(e=>{console.error("Firebase persistence error:",e)}),l=(0,c.aU)(s),i=(0,u.c7)(s),n=new d.HF},59409:(e,t,r)=>{"use strict";r.d(t,{bq:()=>p,eb:()=>x,gC:()=>h,l6:()=>c,yv:()=>u});var s=r(95155),a=r(12115),l=r(71230),i=r(67009),n=r(55852),o=r(23901),d=r(59434);let c=l.bL;l.YJ;let u=l.WT,p=a.forwardRef((e,t)=>{let{className:r,children:a,...n}=e;return(0,s.jsxs)(l.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...n,children:[a,(0,s.jsx)(l.In,{asChild:!0,children:(0,s.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});p.displayName=l.l9.displayName;let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(l.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});m.displayName=l.PP.displayName;let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(l.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});f.displayName=l.wn.displayName;let h=a.forwardRef((e,t)=>{let{className:r,children:a,position:i="popper",...n}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsxs)(l.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...n,children:[(0,s.jsx)(m,{}),(0,s.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(f,{})]})})});h.displayName=l.UC.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(l.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})}).displayName=l.JU.displayName;let x=a.forwardRef((e,t)=>{let{className:r,children:a,...i}=e;return(0,s.jsxs)(l.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),(0,s.jsx)(l.p4,{children:a})]})});x.displayName=l.q7.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(l.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=l.wv.displayName},85057:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var s=r(95155),a=r(12115),l=r(44167),i=r(63999),n=r(59434);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(l.b,{ref:t,className:(0,n.cn)(o(),r),...a})});d.displayName=l.b.displayName},87481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>p});var s=r(12115);let a=0,l=new Map,i=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=n(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function p(){let[e,t]=s.useState(d);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[310,1951,4595,8561,6766,9247,4734,6482,5637,3699,2678,8441,1684,7358],()=>t(36650)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{6723:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(31291).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},12348:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(31291).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},17759:(e,t,r)=>{"use strict";r.d(t,{C5:()=>h,MJ:()=>x,eI:()=>f,lV:()=>c,zB:()=>u});var s=r(95155),a=r(12115),i=r(46057),l=r(29642),n=r(59434),o=r(85057);let c=l.Op,d=a.createContext({}),u=e=>{let{...t}=e;return(0,s.jsx)(d.Provider,{value:{name:t.name},children:(0,s.jsx)(l.xI,{...t})})},m=()=>{let e=a.useContext(d),t=a.useContext(p),{getFieldState:r,formState:s}=(0,l.xW)(),i=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...i}},p=a.createContext({}),f=a.forwardRef((e,t)=>{let{className:r,...i}=e,l=a.useId();return(0,s.jsx)(p.Provider,{value:{id:l},children:(0,s.jsx)("div",{ref:t,className:(0,n.cn)("space-y-2",r),...i})})});f.displayName="FormItem",a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:i,formItemId:l}=m();return(0,s.jsx)(o.J,{ref:t,className:(0,n.cn)(i&&"text-destructive",r),htmlFor:l,...a})}).displayName="FormLabel";let x=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:l,formDescriptionId:n,formMessageId:o}=m();return(0,s.jsx)(i.DX,{ref:t,id:l,"aria-describedby":a?"".concat(n," ").concat(o):"".concat(n),"aria-invalid":!!a,...r})});x.displayName="FormControl",a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:i}=m();return(0,s.jsx)("p",{ref:t,id:i,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})}).displayName="FormDescription";let h=a.forwardRef((e,t)=>{var r;let{className:a,children:i,...l}=e,{error:o,formMessageId:c}=m(),d=o?String(null!=(r=null==o?void 0:o.message)?r:""):i;return d?(0,s.jsx)("p",{ref:t,id:c,className:(0,n.cn)("text-sm font-medium text-destructive",a),...l,children:d}):null});h.displayName="FormMessage"},3e4:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(31291).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},31291:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(12115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:t,...l,width:a,height:a,stroke:r,strokeWidth:o?24*Number(n)/Number(a):n,className:i("lucide",c),...m},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,l)=>{let{className:o,...c}=r;return(0,s.createElement)(n,{ref:l,iconNode:t,className:i("lucide-".concat(a(e)),o),...c})});return r.displayName="".concat(e),r}},36804:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(31291).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},40988:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>M});var s=r(95155),a=r(6874),i=r.n(a),l=r(35695),n=r(29642),o=r(75288),c=r(52651),d=r(30285),u=r(62523),m=r(17759),p=r(12115),f=r(46151),x=r(56104),h=r(87481),v=r(67620),y=r(36804),b=r(12348),g=r(89215),w=r(41630),j=r(3e4);let N=(0,r(31291).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var k=r(6723),A=r(7334),S=r(59434),E=r(66766),I=r(51307),C=r(13262);let T=c.Ik({fullName:c.Yj().min(2,"Le nom complet doit comporter au moins 2 caract\xe8res."),email:c.Yj().email("Veuillez saisir une adresse e-mail valide."),password:c.Yj().min(6,"Le mot de passe doit comporter au moins 6 caract\xe8res."),confirmPassword:c.Yj()}).refine(e=>e.password===e.confirmPassword,{message:"Les mots de passe ne correspondent pas.",path:["confirmPassword"]});function M(){let e=(0,l.useRouter)(),[t,r]=(0,p.useState)(!1),{toast:a}=(0,h.dj)(),[c,M]=(0,p.useState)(!1),[O,V]=(0,p.useState)(!1),[D,P]=(0,p.useState)(null),[R,z]=(0,p.useState)(!1),[F,_]=(0,p.useState)(!1),[L,U]=(0,p.useState)(null),B=(0,n.mN)({resolver:(0,o.u)(T),defaultValues:{fullName:"",email:"",password:"",confirmPassword:""}}),H=async e=>{if(!D)return void a({title:"Veuillez choisir un r\xf4le",description:"S\xe9lectionnez si vous \xeates un client, un traiteur ou un livreur.",variant:"destructive"});r(!0);try{let t=await (0,f.eJ)(x.j2,e.email,e.password);await (0,f.r7)(t.user,{displayName:e.fullName});let r="active",s="users";"caterer"===D?(s="caterers",r="pending"):"delivery"===D&&(s="deliveryPeople",r="pending"),await (0,A.BN)((0,A.H9)(x.db,s,t.user.uid),{name:e.fullName,email:e.email,role:D,status:r,createdAt:new Date}),await (0,f.gA)(t.user),U(e.email),z(!0),a({title:"E-mail de validation envoy\xe9",description:"Veuillez consulter votre bo\xeete de r\xe9ception pour valider votre compte."})}catch(t){console.error("Signup Error:",t);let e="Une erreur s'est produite lors de l'inscription.";"auth/email-already-in-use"===t.code&&(e="Cette adresse e-mail est d\xe9j\xe0 utilis\xe9e. Veuillez vous connecter."),a({title:"Erreur d'inscription",description:e,variant:"destructive"})}finally{r(!1)}},J=async()=>{if(!D)return void a({title:"Veuillez choisir un r\xf4le",description:"S\xe9lectionnez si vous \xeates un client, un traiteur ou un livreur.",variant:"destructive"});r(!0);try{let t=new f.HF,r=await (0,f.df)(x.j2,t),s=r.user,i=(0,f.B8)(r);if(null==i?void 0:i.isNewUser){let t="active",r="users";switch("caterer"===D?(r="caterers",t="pending"):"delivery"===D&&(r="deliveryPeople",t="pending"),await (0,A.BN)((0,A.H9)(x.db,r,s.uid),{name:s.displayName,email:s.email,role:D,status:t,createdAt:new Date,photoURL:s.photoURL}),D){case"client":e.replace("/signup/step2");break;case"caterer":e.replace("/signup/caterer/step2");break;case"delivery":e.replace("/signup/delivery/step2");break;default:e.replace("/login")}}else{let t=(0,A.H9)(x.db,"users",s.uid),r=(0,A.H9)(x.db,"caterers",s.uid),i=(0,A.H9)(x.db,"deliveryPeople",s.uid),l=await (0,A.x7)(t),n=await (0,A.x7)(r),o=await (0,A.x7)(i);if(l.exists()||n.exists()||o.exists())a({title:"Compte existant",description:"Cette adresse e-mail est d\xe9j\xe0 utilis\xe9e. Veuillez vous connecter.",variant:"destructive"}),await x.j2.signOut();else{let t="active",r="users";switch("caterer"===D?(r="caterers",t="pending"):"delivery"===D&&(r="deliveryPeople",t="pending"),await (0,A.BN)((0,A.H9)(x.db,r,s.uid),{name:s.displayName,email:s.email,role:D,status:t,createdAt:new Date,photoURL:s.photoURL}),D){case"client":e.replace("/signup/step2");break;case"caterer":e.replace("/signup/caterer/step2");break;case"delivery":e.replace("/signup/delivery/step2");break;default:e.replace("/login")}}}}catch(e){console.error("Google Sign Up Error:",e),a({title:"Erreur d'inscription avec Google",description:"Une erreur s'est produite.",variant:"destructive"})}finally{r(!1)}},$=async()=>{if(x.j2.currentUser){if(_(!0),await x.j2.currentUser.reload(),x.j2.currentUser.emailVerified)switch(D){case"client":e.replace("/signup/step2");break;case"caterer":e.replace("/signup/caterer/step2");break;case"delivery":e.replace("/signup/delivery/step2");break;default:e.replace("/login")}else a({title:"Email non v\xe9rifi\xe9",description:"Veuillez confirmer votre email avant de continuer.",variant:"destructive"});_(!1)}},G=e=>{let{role:t,label:r,icon:a}=e;return(0,s.jsxs)("button",{type:"button",onClick:()=>P(t),className:(0,S.cn)("flex flex-col items-center justify-center gap-1 rounded-xl aspect-square w-full transition-all duration-300",D===t?"bg-white text-gray-800 shadow-lg":"bg-white/20 text-white hover:bg-white/30"),children:[(0,s.jsx)(a,{className:"w-7 h-7"}),(0,s.jsx)("span",{className:"font-semibold text-sm",children:r})]})},W=e=>{let{name:t,placeholder:r,icon:a,type:i="text",isPassword:l=!1,onToggleVisibility:n,isVisible:o=!1}=e;return(0,s.jsx)(m.zB,{control:B.control,name:t,render:e=>{let{field:t}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.MJ,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(a,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,s.jsx)(u.p,{type:o?"text":i,placeholder:r,...t,className:(0,S.cn)("pl-12 pr-12 h-14 bg-gray-100 border-gray-200 rounded-xl text-base")}),l&&(0,s.jsx)("button",{type:"button",onClick:n,className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400",children:o?(0,s.jsx)(v.A,{className:"h-5 w-5"}):(0,s.jsx)(y.A,{className:"h-5 w-5"})})]})}),(0,s.jsx)(m.C5,{})]})}})};return(0,s.jsx)("div",{className:"min-h-screen bg-white flex flex-col overflow-hidden",children:R?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center flex-1 px-6 text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"V\xe9rifiez votre adresse e-mail"}),(0,s.jsxs)("p",{className:"text-gray-600 mb-6",children:["Un e-mail de confirmation a \xe9t\xe9 envoy\xe9 \xe0 ",(0,s.jsx)("b",{children:L}),". ",(0,s.jsx)("br",{}),"Cliquez sur le lien dans votre bo\xeete mail pour continuer."]}),(0,s.jsx)(d.$,{onClick:$,disabled:F,children:F?(0,s.jsx)(k.A,{className:"h-5 w-5 animate-spin"}):"J'ai v\xe9rifi\xe9 mon e-mail"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.P.div,{className:"relative bg-gradient-to-b from-[#22C58B] to-[#4FD6B3] text-white rounded-b-[3rem] md:rounded-b-[4rem] flex flex-col justify-center",initial:!1,animate:{height:D?"auto":"60vh"},transition:{duration:.6,ease:[.83,0,.17,1]},children:(0,s.jsxs)("div",{className:"w-full max-w-md mx-auto px-4 py-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center relative h-10 mb-4",children:[(0,s.jsx)(E.default,{src:"/k/k white.png",alt:"Kounfit Logo",width:40,height:40,className:"absolute left-0"}),(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"Inscription"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,s.jsx)(G,{role:"client",label:"Client",icon:b.A}),(0,s.jsx)(G,{role:"caterer",label:"Traiteur",icon:g.A}),(0,s.jsx)(G,{role:"delivery",label:"Livreur",icon:w.A})]})]})}),(0,s.jsx)("div",{className:"flex-1 w-full max-w-md mx-auto px-4 overflow-y-auto",children:D&&(0,s.jsxs)(I.P.div,{className:"pt-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.5},children:[(0,s.jsx)(m.lV,{...B,children:(0,s.jsxs)("form",{onSubmit:B.handleSubmit(H),className:"space-y-4",children:[(0,s.jsx)(W,{name:"fullName",placeholder:"Nom complet",icon:b.A}),(0,s.jsx)(W,{name:"email",placeholder:"Email",icon:j.A}),(0,s.jsx)(W,{name:"password",placeholder:"Mot de passe",icon:N,type:"password",isPassword:!0,isVisible:c,onToggleVisibility:()=>M(!c)}),(0,s.jsx)(W,{name:"confirmPassword",placeholder:"Confirmer mot de passe",icon:N,type:"password",isPassword:!0,isVisible:O,onToggleVisibility:()=>V(!O)}),(0,s.jsxs)(d.$,{type:"submit",className:"w-full h-14 text-lg font-semibold rounded-xl bg-[#0B7E58] hover:bg-[#0a6e4d]",disabled:t,children:[t&&(0,s.jsx)(k.A,{className:"mr-2 h-5 w-5 animate-spin"}),"Continuer"]})]})}),(0,s.jsxs)("div",{className:"relative my-4",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("span",{className:"w-full border-t"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,s.jsx)("span",{className:"bg-white px-2 text-muted-foreground",children:"Ou continuer avec"})})]}),(0,s.jsxs)(d.$,{variant:"outline",className:"w-full h-14 text-lg font-semibold rounded-xl",onClick:J,disabled:t,children:[(0,s.jsx)(C.NR,{className:"mr-2 h-5 w-5"})," Continuer avec Google"]})]},D)}),(0,s.jsxs)("p",{className:"py-6 text-center text-sm text-muted-foreground",children:["D\xe9j\xe0 un compte?"," ",(0,s.jsx)(i(),{href:"/login",className:"font-semibold text-[#0B7E58]",children:"Se connecter"})]})]})})}},41630:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(31291).A)("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]])},56104:(e,t,r)=>{"use strict";let s,a,i,l,n;r.d(t,{IG:()=>l,db:()=>i,hJ:()=>n,j2:()=>a});var o=r(49868),c=r(46151),d=r(7334),u=r(46068);s=0===(0,o.Dk)().length?(0,o.Wp)({apiKey:"AIzaSyDhJXy_8JJ89CUMhj8iyldXvps_H5R7AHI",authDomain:"fithelath.firebaseapp.com",projectId:"fithelath",storageBucket:"fithelath.firebasestorage.app",messagingSenderId:"98685881966",appId:"1:98685881966:web:99d8147fde3b9b5847a07f"}):(0,o.Sx)(),a=(0,c.xI)(s),(0,c.oM)(a,c.F0).catch(e=>{console.error("Firebase persistence error:",e)}),i=(0,d.aU)(s),l=(0,u.c7)(s),n=new c.HF},62523:(e,t,r)=>{"use strict";r.d(t,{p:()=>l});var s=r(95155),a=r(12115),i=r(59434);let l=a.forwardRef((e,t)=>{let{className:r,type:a,...l}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...l})});l.displayName="Input"},63999:(e,t,r)=>{"use strict";r.d(t,{F:()=>l});var s=r(61219);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=s.$,l=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return i(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:l,defaultVariants:n}=t,o=Object.keys(l).map(e=>{let t=null==r?void 0:r[e],s=null==n?void 0:n[e];if(null===t)return null;let i=a(t)||a(s);return l[e][i]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return i(e,o,null==t||null==(s=t.compoundVariants)?void 0:s.reduce((e,t)=>{let{class:r,className:s,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...n,...c}[t]):({...n,...c})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},67620:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(31291).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},77868:(e,t,r)=>{"use strict";r.d(t,{hO:()=>o,sG:()=>n});var s=r(12115),a=r(47650),i=r(46057),l=r(95155),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,i.TL)(`Primitive.${t}`),a=s.forwardRef((e,s)=>{let{asChild:a,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(a?r:t,{...i,ref:s})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function o(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}},79704:(e,t,r)=>{Promise.resolve().then(r.bind(r,40988))},85057:(e,t,r)=>{"use strict";r.d(t,{J:()=>c});var s=r(95155),a=r(12115),i=r(44167),l=r(63999),n=r(59434);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.b,{ref:t,className:(0,n.cn)(o(),r),...a})});c.displayName=i.b.displayName},87481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var s=r(12115);let a=0,i=new Map,l=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?l(r):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=n(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=s.useState(c);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},89215:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(31291).A)("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[310,1951,4595,8561,6766,6874,6482,1307,2678,8441,1684,7358],()=>t(79704)),_N_E=e.O()}]);
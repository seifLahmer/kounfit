(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268],{19249:(e,l,i)=>{"use strict";i.d(l,{A:()=>s});let s=(0,i(31291).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},27734:(e,l,i)=>{"use strict";i.r(l),i.d(l,{default:()=>_});var s=i(95155),r=i(35695),t=i(29642),n=i(75288),a=i(52651),c=i(30285),o=i(62523),d=i(17759),x=i(59409),h=i(56104),u=i(88468),m=i(73693),g=i(12115),j=i(87481),v=i(46151),b=i(6723),f=i(23901),p=i(19249),y=i(59434),N=i(13262),w=i(66766);let C=a.Ik({height:a.au.number().min(100,"La taille doit \xeatre un nombre positif."),weight:a.au.number().min(30,"Le poids doit \xeatre un nombre positif."),age:a.au.number().min(16,"Vous devez avoir au moins 16 ans.").max(120),biologicalSex:a.k5(["male","female"],{required_error:"Veuillez s\xe9lectionner votre sexe."}),region:a.Yj({required_error:"Veuillez s\xe9lectionner votre r\xe9gion."}),activityLevel:a.k5(["sedentary","lightly_active","moderately_active","very_active","extremely_active"],{required_error:"Veuillez s\xe9lectionner un niveau d'activit\xe9."}),mainGoal:a.k5(["lose_weight","maintain","gain_muscle"],{required_error:"Veuillez s\xe9lectionner un objectif principal."})});function _(){let e=(0,r.useRouter)(),[l,i]=(0,g.useState)(!1),{toast:a}=(0,j.dj)(),[_,k]=(0,g.useState)(!1),z=(0,t.mN)({resolver:(0,n.u)(C),defaultValues:{height:175,weight:70,age:25,biologicalSex:"male",region:"grand tunis",activityLevel:"lightly_active",mainGoal:"maintain"}});(0,g.useEffect)(()=>{let l=(0,v.hg)(h.j2,l=>{l?k(!0):e.replace("/login")});return()=>l()},[e]);let S=async l=>{i(!0);let s=h.j2.currentUser;if(!s||!s.email){a({title:"Erreur",description:"Utilisateur non trouv\xe9. Veuillez vous reconnecter.",variant:"destructive"}),e.push("/login");return}try{let i=(0,m.J)({age:l.age,gender:l.biologicalSex,weight:l.weight,height:l.height,activityLevel:l.activityLevel,goal:l.mainGoal}),r={fullName:s.displayName||"Utilisateur",email:s.email,photoURL:s.photoURL,role:"client",age:l.age,biologicalSex:l.biologicalSex,weight:l.weight,height:l.height,region:l.region,activityLevel:l.activityLevel,mainGoal:l.mainGoal,calorieGoal:i.calories,macroRatio:i.macros};await (0,u.eg)(s.uid,r),a({title:"Profil compl\xe9t\xe9!",description:"Bienvenue ! Vous allez \xeatre redirig\xe9."}),e.push("/home")}catch(e){console.error("Signup Step 2 Error:",e),a({title:"Erreur",description:"Impossible de sauvegarder votre profil.",variant:"destructive"})}finally{i(!1)}};return _?(0,s.jsxs)("div",{className:"min-h-screen bg-[#F6F8F7] flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[(0,s.jsx)(N.dS,{className:"absolute inset-0 w-full h-full text-gray-400/50"}),(0,s.jsxs)("div",{className:"relative w-full max-w-lg bg-white/70 backdrop-blur-md rounded-3xl shadow-2xl flex flex-col",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-b from-[#22C58B] to-[#0B7E58] rounded-t-3xl text-white text-center p-6 space-y-3 rounded-b-2xl",children:[(0,s.jsx)(w.default,{src:"/kounfit/kounfit white.png",alt:"Kounfit Logo",width:40,height:40,className:"mx-auto"}),(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Inscription Client"}),(0,s.jsx)("p",{className:"text-lg font-medium",children:"– Etape 2/2 –"}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 pt-2",children:[(0,s.jsx)("div",{className:"w-16 h-px bg-white/30"}),(0,s.jsx)("div",{className:"w-5 h-5 bg-white/30 rounded-full"}),(0,s.jsx)("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center text-[#0B7E58]",children:(0,s.jsx)(f.A,{size:14,strokeWidth:3})}),(0,s.jsx)("div",{className:"w-16 h-px bg-white/30"})]})]}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)(d.lV,{...z,children:(0,s.jsxs)("form",{onSubmit:z.handleSubmit(S),className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(d.zB,{control:z.control,name:"height",render:e=>{let{field:l}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.MJ,{children:(0,s.jsxs)("div",{className:"flex items-center bg-white/50 rounded-xl p-3 h-14",children:[(0,s.jsx)(N.Lm,{className:"text-gray-500"}),(0,s.jsx)("span",{className:"ml-3 font-medium text-gray-700",children:"Taille"}),(0,s.jsx)(o.p,{type:"number",...l,className:"text-right border-none bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 shadow-none w-16"}),(0,s.jsx)("span",{className:"text-gray-500",children:"cm"})]})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:z.control,name:"weight",render:e=>{let{field:l}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.MJ,{children:(0,s.jsxs)("div",{className:"flex items-center bg-white/50 rounded-xl p-3 h-14",children:[(0,s.jsx)(N.C4,{className:"text-gray-500"}),(0,s.jsx)("span",{className:"ml-3 font-medium text-gray-700",children:"Poids"}),(0,s.jsx)(o.p,{type:"number",...l,className:"text-right border-none bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 shadow-none w-16"}),(0,s.jsx)("span",{className:"text-gray-500",children:"kg"})]})}),(0,s.jsx)(d.C5,{})]})}})]}),(0,s.jsx)(d.zB,{control:z.control,name:"age",render:e=>{let{field:l}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.MJ,{children:(0,s.jsxs)("div",{className:"flex items-center bg-white/50 rounded-xl p-3 h-14",children:[(0,s.jsx)(N.bj,{className:"text-gray-500"}),(0,s.jsx)("span",{className:"ml-3 font-medium text-gray-700",children:"Age"}),(0,s.jsx)(o.p,{type:"number",...l,className:"text-right border-none bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 shadow-none w-24"})]})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:z.control,name:"region",render:e=>{let{field:l}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsxs)(x.l6,{onValueChange:l.onChange,value:l.value,children:[(0,s.jsx)(d.MJ,{children:(0,s.jsx)(x.bq,{className:"bg-white/50 rounded-xl p-3 h-14 border-none",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(p.A,{className:"text-gray-500 h-6 w-6"}),(0,s.jsx)(x.yv,{})]})})}),(0,s.jsxs)(x.gC,{children:[(0,s.jsx)(x.eb,{value:"grand tunis",children:"Grand Tunis"}),(0,s.jsx)(x.eb,{value:"nabeul",children:"Nabeul"}),(0,s.jsx)(x.eb,{value:"sousse",children:"Sousse"}),(0,s.jsx)(x.eb,{value:"sfax",children:"Sfax"}),(0,s.jsx)(x.eb,{value:"bizerte",children:"Bizerte"})]})]}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:z.control,name:"activityLevel",render:e=>{let{field:l}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsxs)(x.l6,{onValueChange:l.onChange,value:l.value,children:[(0,s.jsx)(d.MJ,{children:(0,s.jsx)(x.bq,{className:"bg-white/50 rounded-xl p-3 h-14 border-none",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(N.np,{className:"text-gray-500"}),(0,s.jsx)(x.yv,{})]})})}),(0,s.jsxs)(x.gC,{children:[(0,s.jsx)(x.eb,{value:"sedentary",children:"S\xe9dentaire"}),(0,s.jsx)(x.eb,{value:"lightly_active",children:"L\xe9g\xe8rement actif"}),(0,s.jsx)(x.eb,{value:"moderately_active",children:"Mod\xe9r\xe9ment actif"}),(0,s.jsx)(x.eb,{value:"very_active",children:"Tr\xe8s actif"}),(0,s.jsx)(x.eb,{value:"extremely_active",children:"Extr\xeamement actif"})]})]}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:z.control,name:"mainGoal",render:e=>{let{field:l}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsxs)(x.l6,{onValueChange:l.onChange,value:l.value,children:[(0,s.jsx)(d.MJ,{children:(0,s.jsx)(x.bq,{className:"bg-white/50 rounded-xl p-3 h-14 border-none",children:(0,s.jsx)(x.yv,{})})}),(0,s.jsxs)(x.gC,{children:[(0,s.jsx)(x.eb,{value:"lose_weight",children:"Perdre du poids"}),(0,s.jsx)(x.eb,{value:"maintain",children:"Maintien"}),(0,s.jsx)(x.eb,{value:"gain_muscle",children:"Prendre du muscle"})]})]}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:z.control,name:"biologicalSex",render:e=>{let{field:l}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between bg-white/50 rounded-xl p-3 h-14",children:[(0,s.jsx)("span",{className:"ml-3 font-medium text-gray-700",children:"Genre"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.$,{type:"button",onClick:()=>l.onChange("male"),className:(0,y.cn)("rounded-full transition","male"===l.value?"bg-[#0B7E58] text-white":"bg-gray-200 text-gray-600"),children:"Homme"}),(0,s.jsx)(c.$,{type:"button",onClick:()=>l.onChange("female"),className:(0,y.cn)("rounded-full transition","female"===l.value?"bg-[#0B7E58] text-white":"bg-gray-200 text-gray-600"),children:"Femme"})]})]}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsxs)(c.$,{type:"submit",className:"w-full h-14 text-lg font-semibold rounded-full bg-secondary hover:bg-secondary/90 text-white",disabled:l,children:[l&&(0,s.jsx)(b.A,{className:"mr-2 h-5 w-5 animate-spin"}),"Terminer"]}),(0,s.jsx)(c.$,{type:"button",variant:"link",className:"w-full text-muted-foreground",onClick:()=>e.back(),children:"Retour"})]})})})]})]}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-[#F6F8F7]",children:(0,s.jsx)(b.A,{className:"h-12 w-12 animate-spin text-primary"})})}},50071:(e,l,i)=>{Promise.resolve().then(i.bind(i,27734))}},e=>{var l=l=>e(e.s=l);e.O(0,[310,1951,4595,8561,6766,9247,4734,6482,5637,3699,2678,6720,8441,1684,7358],()=>l(50071)),_N_E=e.O()}]);
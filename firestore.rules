{
  "rules": {
    "users": {
      "$uid": {
        ".read": "request.auth.uid == $uid",
        ".write": "request.auth.uid == $uid"
      }
    },
    "admins": {
      "$uid": {
        ".read": "exists(/databases/$(database)/documents/admins/$(request.auth.uid))",
        ".write": "exists(/databases/$(database)/documents/admins/$(request.auth.uid))"
      }
    },
    "caterers": {
      "$uid": {
        ".read": true,
        ".write": "exists(/databases/$(database)/documents/admins/$(request.auth.uid))"
      }
    },
    "meals": {
      "$mealId": {
        "allow read": true,
        "allow create": "request.auth.uid != null && request.resource.data.createdBy == request.auth.uid",
        "allow update": "request.auth.uid != null && (resource.data.createdBy == request.auth.uid || exists(/databases/$(database)/documents/admins/$(request.auth.uid)))",
        "allow delete": "request.auth.uid != null && (resource.data.createdBy == request.auth.uid || exists(/databases/$(database)/documents/admins/$(request.auth.uid)))"
      }
    },
    "orders": {
      "$orderId": {
        ".read": true,
        ".create": "request.auth.uid != null",
        ".update": "exists(/databases/$(database)/documents/caterers/$(request.auth.uid)) || exists(/databases/$(database)/documents/admins/$(request.auth.uid))"
      }
    },
    "notifications": {
      "$notificationId": {
        ".read": "resource.data.userId == request.auth.uid",
        ".create": true,
        ".update": "resource.data.userId == request.auth.uid"
      }
    }
  }
}
